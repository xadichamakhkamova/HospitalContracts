syntax = "proto3";

option go_package = "./genproto/pharmacistpb";             

import "google/protobuf/timestamp.proto";                 

// ---------------- Service ----------------
service PharmacistService {
     // Medicine
     rpc CreateMedicine(CreateMedicineRequest) returns (CreateMedicineResponse);
     rpc GetMedicineById(GetMedicineByIdRequest) returns (GetMedicineByIdResponse);
     rpc ListMedicines(ListMedicinesRequest) returns (ListMedicinesResponse);
     rpc UpdateMedicine(UpdateMedicineRequest) returns (UpdateMedicineResponse);
     rpc DeleteMedicine(DeleteMedicineRequest) returns (DeleteMedicineResponse);
}

// Medicine category enum
enum MedicineCategory {
    MEDICINE_CATEGORY_UNSPECIFIED = 0; // default
    MEDICINE_CATEGORY_ANTIBIOTIC = 1;  // Antibiotiklar
    MEDICINE_CATEGORY_ANALGESIC = 2;   // Ogâ€˜riq qoldiruvchilar
    MEDICINE_CATEGORY_ANTIVIRAL = 3;   // Virusga qarshi
    MEDICINE_CATEGORY_VITAMINS = 4;    // Vitaminlar
    MEDICINE_CATEGORY_ANTIFUNGAL = 5;  // Zamburuglarga qarshi
    MEDICINE_CATEGORY_VACCINE = 6;     // Vaktsinalar
    MEDICINE_CATEGORY_OTHER = 7;       // Boshqa
}


// Medicine status enum
enum MedicineStatus {
    MEDICINE_STATUS_UNSPECIFIED = 0; // default
    MEDICINE_STATUS_AVAILABLE = 1;
    MEDICINE_STATUS_OUT_OF_STOCK = 2;
    MEDICINE_STATUS_EXPIRED = 3;
    MEDICINE_STATUS_DISCONTINUED = 4;
}

message Medicine {
    string id = 1;
    string name = 2;
    MedicineCategory category = 3;
    string description = 4;
    float price = 5;
    string company = 6;
    MedicineStatus status = 7;
    Timestamps5 timestamps = 8;
}

// ---------------- Medicine CRUD ----------------
//CREATE
message CreateMedicineRequest {
    string name = 1;
    MedicineCategory category = 2;
    string description = 3;
    float price = 4;
    string company = 5;
    MedicineStatus status = 6; 
}
message CreateMedicineResponse {
    Medicine medicine = 1;
}

//GET BY ID
message GetMedicineByIdRequest {
    string id = 1;
}
message GetMedicineByIdResponse {
    Medicine medicine = 1;
}

//LIST 
message ListMedicinesRequest {
    string search = 1;        // name, category, company
    MedicineStatus status = 2;         // optional filter (available, out_of_stock)
    int32 page = 3;           // for pagination
    int32 limit = 4;          // for pagination
}
message ListMedicinesResponse {
    repeated Medicine medicines = 1;
    int32 total_count = 2;    // umumiy soni
}

//UPDATE
message UpdateMedicineRequest {
    string id = 1;
    string name = 2;
    MedicineCategory category = 3;
    string description = 4;
    float price = 5;
    string company = 6;
    MedicineStatus status = 7;
}
message UpdateMedicineResponse {
    Medicine medicine = 1;
}

//DELETE
message DeleteMedicineRequest {
    string id = 1;
}
message DeleteMedicineResponse {
    int64 status = 1; // 204 = deleted
}
 
message Timestamps5 {
    google.protobuf.Timestamp created_at = 1;
    google.protobuf.Timestamp updated_at = 2;
}